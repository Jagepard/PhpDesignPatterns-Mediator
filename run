#! usr/bin/env php
<?php

namespace Behavioral\Mediator;

require_once 'vendor/autoload.php';

$mediator = new ConcreteMediator();
$handler  = new SomeHandler();

try {
    $mediator->addListener('colleague_1', [new ConcreteColleague1(), 'onEvent']);
    $mediator->addListener('colleague_2', [new ConcreteColleague2(), 'onEvent']);
    $mediator->addListener('colleague_3', [ConcreteColleague3::class, 'onEvent']);
    $mediator->dispatch('colleague_1');
    $mediator->dispatch('colleague_2', $handler);
    $mediator->dispatch('colleague_3', $handler);
} catch (\Exception $e) {
    echo 'Caught exception: ',  $e->getMessage(), "\n";
}
